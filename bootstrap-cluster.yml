---
- name: Bootstrap SSH access and verify connectivity
  hosts: all
  gather_facts: false
  become: true
  vars:
    ansible_ssh_private_key_file: ~/.ssh/id_ed25519
    ansible_user: ubuntu
  tasks:
    - name: Check if hosts are reachable
      ansible.builtin.ping:
      register: ping_result
      ignore_errors: yes

    - name: Display unreachable hosts
      ansible.builtin.debug:
        msg: "Host {{ inventory_hostname }} ({{ ansible_host }}) is not reachable!"
      when: ping_result.failed

  

    - name: Verify SSH key authentication
      ansible.builtin.ping: